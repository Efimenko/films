(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(44)},27:function(e,t,a){},28:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=(a(27),a(7)),l=a(8),s=a(9),m=a.n(s),u=a(2),v=a(6),f=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){var t;return e&&fetch(e).then(function(e){if(200!==e.status)throw new Error({code:e.status,text:e.statusText});return e.json()}).then(function(e){t||c(e)}).catch(function(e){c(Object(v.a)({error:!0},e))}),function(){t=!0}},[e]),r},p="https://api.themoviedb.org/3",g="0941767c7620287c671c840b1c091fd2",d="https://image.tmdb.org/t/p/w500",E=(a(28),function(e){var t=e.history,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),m=Object(u.a)(s,2),v=m[0],d=m[1],E=Object(n.useRef)(null),h=o?"".concat(p,"/search/movie?api_key=").concat(g,"&page=1&query=").concat(o):"",_=f(h).results;Object(n.useEffect)(function(){var e=function(e){E&&!E.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),document.addEventListener("focusin",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("focusin",e)}});var b=o&&_;return r.a.createElement("div",{className:"search-wrapper",ref:E},r.a.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),t.push("/search/?query=".concat(o,"&page=1")),l("")}},r.a.createElement("input",{className:"search-form__input",placeholder:"Type something...",value:o,onChange:function(e){l(e.target.value)},onFocus:function(){return d(!0)},required:!0}),r.a.createElement("button",{className:"search-form__button",type:"submit"},"Search")),b&&v&&Boolean(_.length)&&r.a.createElement("ul",{className:"live-results"},_.slice(0,5).map(function(e){var t=e.id,a=e.title,n=e.poster_path,c=e.release_date,o=e.vote_average;return r.a.createElement("li",{className:"live-results__item"},r.a.createElement("img",{className:"live-results__image",src:"".concat("https://image.tmdb.org/t/p/w200","/").concat(n),alt:"Poster for ".concat(a)}),r.a.createElement("div",{className:"live-results__meta"},r.a.createElement(i.b,{to:"/film/".concat(t),className:"live-results__link",onClick:function(){return l("")}},a),"\xa0",r.a.createElement("span",{class:"live-results__year"},"(",c.slice(0,4),")"),r.a.createElement("br",null),r.a.createElement("div",{className:"rating live-results__rating"},o)))})),b&&v&&!_.length&&r.a.createElement("div",{className:"live-results live-results--empty"},"Nothing to found"))}),h=(a(37),{popular:{path:"/",title:"Popular"},favorites:{path:"/favorites",title:"Favorites"}}),_=Object(l.d)(function(e){var t=e.history,a=t.location.pathname;return r.a.createElement("header",{className:"header"},r.a.createElement(E,{history:t}),r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",{className:"nav-list"},Object.keys(h).map(function(e){return r.a.createElement("li",{key:e,className:m()("nav-list__item",{"nav-list__item--current":a===h[e].path})},r.a.createElement(i.b,{to:h[e].path,className:"nav-list__link"},h[e].title))}))))}),b=(a(38),a(21)),N=a(10),F=(a(39),function(e){var t=e.addToFavorite,a=e.removeFromFavorite,n=e.isFavorite,c=e.id,o=e.film;return r.a.createElement("button",{type:"button",className:"favorite-button film-item__favorite",onClick:n?a(c):t(Object(N.a)({},c,o)),title:n?"Remove from favorite":"Add to favorite"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 53.9 53.9",className:m()("favorite-icon",{"favorite-icon--active":n})},r.a.createElement("path",{d:"M27 1.3l8.3 16.9 18.6 2.7L40.4 34l3.2 18.5-16.7-8.7-16.6 8.7L13.5 34 0 21l18.6-2.7z"})))}),O=(a(40),function(e){var t=e.title,a=e.id,n=e.posterPath,c=e.rating,o=e.addToFavorite,l=e.removeFromFavorite,s=e.isFavorite;return r.a.createElement("article",{className:"film-item"},r.a.createElement("div",{className:"film-item__image-wrapper"},r.a.createElement("img",{src:"".concat(d,"/").concat(n),className:"film-item__image",alt:"Poster for ".concat(t)})),r.a.createElement("div",{className:"film-item__inner"},r.a.createElement("h3",{className:"film-item__title"},r.a.createElement(i.b,{to:"/film/".concat(a),className:"film-item__link"},t)),r.a.createElement("div",{className:"film-item__top"},r.a.createElement(F,{addToFavorite:o,removeFromFavorite:l,isFavorite:s,id:a,film:{title:t,vote_average:c,poster_path:n}}),c&&r.a.createElement("span",{className:"rating"},c))))}),y=function(){var e=JSON.parse(localStorage.getItem("favorites"))||{},t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){localStorage.setItem("favorites",JSON.stringify(r)),window.dispatchEvent(new Event("storage"))},[r]),{isFavorite:function(e){return Object.keys(r).includes(String(e))},addToFavorite:function(e){return function(){c(Object(v.a)({},r,e))}},removeFromFavorite:function(e){return function(){var t=Object.assign({},r);delete t[e],c(t)}}}},j=(a(41),function(e){var t=e.data,a=y(),n=a.isFavorite,c=a.addToFavorite,o=a.removeFromFavorite;return t&&t.length?r.a.createElement("ul",{className:"films-list"},t.map(function(e){var t=e.title,a=e.id,i=e.poster_path,l=e.vote_average;return r.a.createElement("li",{key:a,className:"films-list__item"},r.a.createElement(O,{title:t,id:a,posterPath:i,rating:l,addToFavorite:c,removeFromFavorite:o,isFavorite:n(a)}))})):null}),w=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){var e=JSON.parse(localStorage.getItem("favorites"))||{};c(e)},[]),Object(n.useEffect)(function(){var e=function(e){c(JSON.parse(localStorage.getItem("favorites")))};return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}});var o=a?Object.keys(a).reduce(function(e,t){var n=a[t],r=n.poster_path,c=n.title,o=n.vote_average;return[].concat(Object(b.a)(e),[{id:t,poster_path:r,title:c,vote_average:o}])},[]):[];return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"page-content"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"page-title"},"Favorite films")),0===Object.keys(a).length?"List of favorites films is empty":r.a.createElement(j,{data:o}))):null},k=function(e){return e?e.slice(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var a=Object(u.a)(t,2),n=a[0],r=a[1];return Object(v.a)({},e,Object(N.a)({},n,r))},{}):{}},P=function(e){return e?Object.keys(e).reduce(function(t,a,n){return t+=0===n?"?".concat(a,"=").concat(e[a]):"&".concat(a,"=").concat(e[a])},""):""},S=(a(42),function(e){var t=e.currentPage,a=e.totalPages,n=e.maxPages,c=e.onChangePage,o=function(e){var t,a,n=e.currentPage,r=e.totalPages,c=e.maxPages,o=void 0===c?7:c,i=Math.floor(o/2),l=Math.ceil(o/2)-1;return r<o?(t=1,a=r):n-i>1&&n+l<r?(t=n-i,a=n+l):n-i<=1?(t=1,a=o):n+l>=r&&(t=r-o+1,a=r),{startPage:t,endPage:a}}({currentPage:t,totalPages:a,maxPages:n}),i=function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}(o.startPage,o.endPage);return i.length&&r.a.createElement("ul",{className:"pagination"},i.map(function(e){return r.a.createElement("li",{key:e,className:m()("pagination__item",{"pagination__item--current":e===t})},r.a.createElement("a",{href:"#page".concat(e),className:"pagination__link",onClick:function(t){t.preventDefault(),c(e)}},e))}))}),T=function(e){var t=e.match.params.genreId,a="".concat(p,"/discover/movie?api_key=").concat(g,"&with_genres=").concat(t),n=f(a).results;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"page-title"},"Films by genre")),r.a.createElement(j,{data:n})):null},x=function(e){var t=e.location,a=e.history,n=k(t.search),c=Number(n.page)||1,o="".concat(p,"/movie/popular?api_key=").concat(g,"&page=").concat(c),i=f(o,c);return Boolean(Object.keys(i).length)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"page-content"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"page-title"},"Popular films")),r.a.createElement(j,{data:i.results})),i.total_pages&&r.a.createElement(S,{currentPage:c,totalPages:i.total_pages,onChangePage:function(e){var t=P(Object(v.a)({},n,{page:e}));a.push({search:t})}}))},I=function(e){var t=e.location,a=e.history,n=k(t.search),c=Number(n.page),o=n.query,i="".concat(p,"/search/movie?api_key=").concat(g,"&page=").concat(c,"&query=").concat(o),l=f(i,c,t);return l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"page-content"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"page-title"},"Search results")),r.a.createElement(j,{data:l.results})),l.total_pages&&r.a.createElement(S,{currentPage:c,totalPages:l.total_pages,onChangePage:function(e){var t=P(Object(v.a)({},n,{page:e}));a.push({search:t})}}))},L=function(e){var t=e.match.params.filmId,a="".concat(p,"/movie/").concat(t,"?api_key=").concat(g),n="".concat(p,"/movie/").concat(t,"/similar?api_key=").concat(g),c=f(a),o=f(n,t),l=y(),s=l.isFavorite,m=l.addToFavorite,u=l.removeFromFavorite,v=c.title,E=c.poster_path,h=c.overview,_=c.genres,b=c.vote_average;return Boolean(Object.keys(c).length)&&r.a.createElement("article",null,r.a.createElement("h2",null,v),r.a.createElement("img",{src:"".concat(d,"/").concat(E),alt:"Poster for ".concat(v)}),Boolean(_.length)&&r.a.createElement("ul",null,_.map(function(e){var t=e.id,a=e.name;return r.a.createElement("li",{key:t},r.a.createElement(i.b,{to:"/genre/".concat(t)},a))})),"Rating: ",b,r.a.createElement(F,{addToFavorite:m,removeFromFavorite:u,isFavorite:s(t),id:t,film:{title:v,vote_average:b,poster_path:E}}),r.a.createElement("p",null,h),Boolean(Object.keys(o).length)&&r.a.createElement("section",null,r.a.createElement("h3",null,"Similar"),r.a.createElement(j,{data:o.results})))},B=(a(43),function(){return r.a.createElement(i.a,{basename:"films"},r.a.createElement("div",{className:"App"},r.a.createElement(_,null),r.a.createElement(l.a,{exact:!0,path:"/",component:x}),r.a.createElement(l.a,{path:"/search",component:I}),r.a.createElement(l.a,{path:"/favorites",component:w}),r.a.createElement(l.a,{path:"/film/:filmId",component:L}),r.a.createElement(l.a,{path:"/genre/:genreId",component:T})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.03afd634.chunk.js.map